id: OMB-14
type: task
parent: OMB-8
title: Install and configure React Navigation 7 with navigation structure
status: done
created: 2026-02-09
assignee: Claude
estimate_minutes: 45
estimate_tokens: null
actual_minutes: 15
actual_tokens: 3500
completed: 2026-02-10
blockers: []
description: "Install React Navigation 7 and set up the full navigation structure.\n\n1. Install React Navigation 7 and all required dependencies:\n   ```bash\n   cd src/mobile\n   npm install @react-navigation/native@^7.0.0 @react-navigation/native-stack@^7.0.0 @react-navigation/bottom-tabs@^7.0.0 @react-navigation/material-top-tabs@^7.0.0\n   npm install react-native-screens react-native-safe-area-context\n   npm install react-native-pager-view\n   ```\n\n2. For iOS: `cd ios && pod install`\n\n3. Create navigation type definitions at `src/mobile/src/navigation/types.ts`:\n   ```typescript\n   import type { NativeStackScreenProps } from '@react-navigation/native-stack';\n   import type { BottomTabScreenProps } from '@react-navigation/bottom-tabs';\n   import type { CompositeScreenProps, NavigatorScreenParams } from '@react-navigation/native';\n\n   // Root stack (auth vs main app)\n   export type RootStackParamList = {\n     Auth: NavigatorScreenParams<AuthStackParamList>;\n     Main: NavigatorScreenParams<MainTabParamList>;\n   };\n\n   // Auth screens\n   export type AuthStackParamList = {\n     Login: undefined;\n     Register: undefined;\n     ResetPassword: undefined;\n     OTPVerification: { email: string; type: 'login' | 'register' | 'reset' };\n     MagicLogin: { token: string };\n   };\n\n   // Main tab navigator\n   export type MainTabParamList = {\n     Dashboard: undefined;\n     Tasks: NavigatorScreenParams<TasksStackParamList>;\n     Timers: NavigatorScreenParams<TimersStackParamList>;\n     Agent: NavigatorScreenParams<AgentStackParamList>;\n     More: NavigatorScreenParams<MoreStackParamList>;\n   };\n\n   // Tasks stack\n   export type TasksStackParamList = {\n     ProjectList: undefined;\n     EpicList: { projectId: string };\n     StoryList: { projectId: string; epicId: string };\n     TaskDetail: { projectId: string; epicId: string; storyId: string; taskId: string };\n   };\n\n   // Timers stack\n   export type TimersStackParamList = {\n     TimerHome: undefined;\n     TimerReport: undefined;\n     PomodoroSettings: undefined;\n   };\n\n   // Agent stack\n   export type AgentStackParamList = {\n     AgentHome: undefined;\n     AgentChat: { agentId: string };\n     AgentPermissions: { agentId: string };\n   };\n\n   // More stack (settings, profile, team, VC, notifications)\n   export type MoreStackParamList = {\n     MoreHome: undefined;\n     VersionControl: undefined;\n     CommitDetail: { commitId: string };\n     PRDetail: { prId: string };\n     IssueDetail: { issueId: string };\n     TeamDashboard: undefined;\n     TeamMembers: undefined;\n     TeamInvite: undefined;\n     NotificationCenter: undefined;\n     Settings: undefined;\n     Profile: undefined;\n   };\n\n   // Helper types for screen props\n   export type RootStackScreenProps<T extends keyof RootStackParamList> =\n     NativeStackScreenProps<RootStackParamList, T>;\n\n   export type AuthScreenProps<T extends keyof AuthStackParamList> =\n     CompositeScreenProps<\n       NativeStackScreenProps<AuthStackParamList, T>,\n       RootStackScreenProps<keyof RootStackParamList>\n     >;\n\n   export type MainTabScreenProps<T extends keyof MainTabParamList> =\n     CompositeScreenProps<\n       BottomTabScreenProps<MainTabParamList, T>,\n       RootStackScreenProps<keyof RootStackParamList>\n     >;\n   ```\n\n4. Create the root navigator at `src/mobile/src/navigation/RootNavigator.tsx`:\n   ```typescript\n   import React from 'react';\n   import { createNativeStackNavigator } from '@react-navigation/native-stack';\n   import type { RootStackParamList } from './types';\n   // Import AuthNavigator and MainTabNavigator (placeholder screens for now)\n   import { View, Text } from 'react-native';\n\n   const Stack = createNativeStackNavigator<RootStackParamList>();\n\n   // Placeholder screens - will be replaced by real navigators\n   const AuthPlaceholder = () => (\n     <View className=\"flex-1 items-center justify-center\">\n       <Text>Auth Screens</Text>\n     </View>\n   );\n   const MainPlaceholder = () => (\n     <View className=\"flex-1 items-center justify-center\">\n       <Text>Main App</Text>\n     </View>\n   );\n\n   export const RootNavigator: React.FC = () => {\n     // TODO: Check auth state from store to determine initial route\n     const isAuthenticated = false;\n\n     return (\n       <Stack.Navigator screenOptions={{ headerShown: false }}>\n         {isAuthenticated ? (\n           <Stack.Screen name=\"Main\" component={MainPlaceholder} />\n         ) : (\n           <Stack.Screen name=\"Auth\" component={AuthPlaceholder} />\n         )}\n       </Stack.Navigator>\n     );\n   };\n   ```\n\n5. Create `src/mobile/src/navigation/index.ts`:\n   ```typescript\n   export { RootNavigator } from './RootNavigator';\n   export type * from './types';\n   ```\n\n6. Update `src/mobile/src/App.tsx` to use the navigator:\n   ```typescript\n   import React from 'react';\n   import { NavigationContainer } from '@react-navigation/native';\n   import { SafeAreaProvider } from 'react-native-safe-area-context';\n   import { GestureHandlerRootView } from 'react-native-gesture-handler';\n   import { StatusBar } from 'react-native';\n   import { RootNavigator } from '@navigation';\n   import '../global.css';\n\n   const App: React.FC = () => {\n     return (\n       <GestureHandlerRootView style={{ flex: 1 }}>\n         <SafeAreaProvider>\n           <StatusBar barStyle=\"dark-content\" />\n           <NavigationContainer>\n             <RootNavigator />\n           </NavigationContainer>\n         </SafeAreaProvider>\n       </GestureHandlerRootView>\n     );\n   };\n\n   export default App;\n   ```\n\n7. Verify: App renders the Auth placeholder screen on launch (since isAuthenticated = false)."
acceptance_criteria[7]: "@react-navigation/native@^7, @react-navigation/native-stack@^7, @react-navigation/bottom-tabs@^7 installed",react-native-screens and react-native-pager-view installed,Full navigation type definitions exist at src/mobile/src/navigation/types.ts covering all screen param lists,RootNavigator conditionally renders Auth or Main based on auth state,NavigationContainer wraps the app in App.tsx,App renders Auth placeholder screen by default,TypeScript compiles with no errors (npx tsc --noEmit)

**Dependencies:**
This task requires the following tasks to be completed first: OMB-13

**⚠️ Design System Dependency:**
This task requires the Orchestra Design System foundation to be completed first (ODS-1, ODS-2). Use design tokens and core components from `packages/design-system/` instead of creating custom styles.
story: OMB-8
epic: OMB-1
project: oap-mobile
projectKey: OMB
path: .projects/oap-mobile/OMB-1/OMB-8/OMB-14.toon
