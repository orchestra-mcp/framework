id: OMB-15
type: task
parent: OMB-9
title: Install Zustand and create base store architecture
status: done
created: 2026-02-09
assignee: Claude
estimate_minutes: 25
estimate_tokens: null
actual_minutes: 10
actual_tokens: 2500
completed: 2026-02-10
blockers: []
description: "Install Zustand for state management and create the base store architecture matching patterns from the Chrome extension stores.\n\n1. Install Zustand:\n   ```bash\n   cd src/mobile\n   npm install zustand\n   ```\n\n2. Create `src/mobile/src/stores/authStore.ts`:\n   ```typescript\n   import { create } from 'zustand';\n\n   interface User {\n     id: number;\n     name: string;\n     email: string;\n     avatar_url: string | null;\n     role: 'employee' | 'team_owner' | 'admin';\n     team_id: number | null;\n   }\n\n   interface AuthState {\n     user: User | null;\n     token: string | null;\n     isAuthenticated: boolean;\n     isLoading: boolean;\n     setUser: (user: User | null) => void;\n     setToken: (token: string | null) => void;\n     setLoading: (loading: boolean) => void;\n     logout: () => void;\n   }\n\n   export const useAuthStore = create<AuthState>((set) => ({\n     user: null,\n     token: null,\n     isAuthenticated: false,\n     isLoading: true,\n     setUser: (user) => set({ user, isAuthenticated: !!user }),\n     setToken: (token) => set({ token }),\n     setLoading: (isLoading) => set({ isLoading }),\n     logout: () => set({ user: null, token: null, isAuthenticated: false }),\n   }));\n   ```\n\n3. Create `src/mobile/src/stores/appStore.ts`:\n   ```typescript\n   import { create } from 'zustand';\n\n   interface AppState {\n     isOnline: boolean;\n     isOfflineMode: boolean;\n     theme: 'light' | 'dark' | 'system';\n     setOnline: (online: boolean) => void;\n     setOfflineMode: (offline: boolean) => void;\n     setTheme: (theme: 'light' | 'dark' | 'system') => void;\n   }\n\n   export const useAppStore = create<AppState>((set) => ({\n     isOnline: true,\n     isOfflineMode: false,\n     theme: 'system',\n     setOnline: (isOnline) => set({ isOnline }),\n     setOfflineMode: (isOfflineMode) => set({ isOfflineMode }),\n     setTheme: (theme) => set({ theme }),\n   }));\n   ```\n\n4. Create `src/mobile/src/stores/notificationStore.ts`:\n   ```typescript\n   import { create } from 'zustand';\n\n   interface Notification {\n     id: string;\n     type: 'agent_permission' | 'agent_question' | 'task_assigned' | 'meeting_reminder' | 'mention' | 'marketing';\n     title: string;\n     body: string;\n     data: Record<string, unknown>;\n     read: boolean;\n     created_at: string;\n   }\n\n   interface NotificationState {\n     notifications: Notification[];\n     unreadCount: number;\n     addNotification: (notification: Notification) => void;\n     markAsRead: (id: string) => void;\n     markAllAsRead: () => void;\n     clearAll: () => void;\n   }\n\n   export const useNotificationStore = create<NotificationState>((set, get) => ({\n     notifications: [],\n     unreadCount: 0,\n     addNotification: (notification) => set((state) => ({\n       notifications: [notification, ...state.notifications],\n       unreadCount: state.unreadCount + 1,\n     })),\n     markAsRead: (id) => set((state) => ({\n       notifications: state.notifications.map((n) =>\n         n.id === id ? { ...n, read: true } : n\n       ),\n       unreadCount: Math.max(0, state.unreadCount - 1),\n     })),\n     markAllAsRead: () => set((state) => ({\n       notifications: state.notifications.map((n) => ({ ...n, read: true })),\n       unreadCount: 0,\n     })),\n     clearAll: () => set({ notifications: [], unreadCount: 0 }),\n   }));\n   ```\n\n5. Create `src/mobile/src/stores/index.ts`:\n   ```typescript\n   export { useAuthStore } from './authStore';\n   export { useAppStore } from './appStore';\n   export { useNotificationStore } from './notificationStore';\n   ```\n\n6. Verify: Import all stores in App.tsx temporarily and confirm no TypeScript errors."
acceptance_criteria[6]: zustand is installed in package.json,"authStore.ts exists with User type, token management, and logout action",appStore.ts exists with online/offline state and theme selection,notificationStore.ts exists with notification CRUD operations and unread count,All stores export from stores/index.ts barrel file,npx tsc --noEmit passes with no errors

**⚠️ Design System Dependency:**
This task requires the Orchestra Design System foundation to be completed first (ODS-1, ODS-2). Use design tokens and core components from `packages/design-system/` instead of creating custom styles.
story: OMB-9
epic: OMB-1
project: oap-mobile
projectKey: OMB
path: .projects/oap-mobile/OMB-1/OMB-9/OMB-15.toon
