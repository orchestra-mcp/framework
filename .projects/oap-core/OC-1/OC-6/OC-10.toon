id: OC-10
type: task
parent: OC-6
title: Update electron.vite.config.ts for new src/ entry points
status: done
created: 2026-02-09
assignee: Claude
estimate_minutes: 20
estimate_tokens: null
blockers: []
description: "**File to modify:** `/packages/desktop/electron.vite.config.ts`\n\n**Reference (current file at packages/desktop/electron.vite.config.ts):**\n```typescript\nimport { defineConfig, externalizeDepsPlugin } from 'electron-vite';\nimport { resolve } from 'path';\n\nexport default defineConfig({\n  main: {\n    plugins: [externalizeDepsPlugin({ exclude: [] })],\n    build: {\n      lib: {\n        entry: resolve(__dirname, 'src/main/index.ts'),\n      },\n      outDir: 'dist/main',\n      rollupOptions: {\n        external: ['electron', 'ws'],\n      },\n    },\n  },\n  // ... preload and renderer sections\n});\n```\n\n**What to do:**\n1. The electron.vite.config.ts currently resolves entry points relative to `packages/desktop/`. \n2. Add Vite `resolve.alias` so that `@app/*` maps to the `src/app/` directory and `@packages/*` maps to `src/packages/`:\n```typescript\nmain: {\n  resolve: {\n    alias: {\n      '@app': resolve(__dirname, '../../src/app'),\n      '@packages': resolve(__dirname, '../../src/packages'),\n    },\n  },\n  // ... rest of config\n},\n```\n3. Ensure rollupOptions correctly externalizes dependencies from the new structure\n4. If the config references any paths under `src/main/platform/` or `src/main/services/`, those should eventually map to `src/app/Providers/` and `src/app/Services/` but DON'T change the actual entry points yet (those files haven't been migrated yet)\n\n**Verification:** Run `pnpm build:desktop` and check it completes. The alias resolution should not break any existing imports."
acceptance_criteria[4]: electron.vite.config.ts has resolve.alias for @app and @packages pointing to src/ directories,The config file is valid TypeScript and passes typecheck,"pnpm build:desktop does not fail due to path resolution",All existing entry points still resolve correctly

**⚠️ Design System Dependency:**
This task requires the Orchestra Design System foundation to be completed first (ODS-1, ODS-2). Use design tokens and core components from `packages/design-system/` instead of creating custom styles.
story: OC-6
epic: OC-1
project: oap-core
projectKey: OC
projectKey: OC
path: .projects/oap-core/OC-1/OC-6/OC-10.toon
